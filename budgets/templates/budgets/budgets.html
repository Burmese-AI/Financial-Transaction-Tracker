{% extends "main.html" %}

{% block content %}
<div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 py-6">
  <!-- Title and Add Button -->
  <div class="flex justify-between items-center mb-6">
    <h1 class="text-2xl font-semibold text-gray-900">Budgets</h1>
    <button
      hx-get="#"
      hx-target="#modal-placeholder"
      hx-swap="outerHTML"
      class="bg-amber-700 text-white px-4 py-2 rounded-md shadow-sm text-sm font-medium transition-colors duration-200 transform hover:scale-105 hover:bg-amber-900 focus:outline-none focus:ring-2 focus:ring-amber-900 focus:ring-offset-2"
    >
      Add Budget
    </button>
  </div>

  <!-- Budget Table and Pagination -->
  <div id="budget-table-container" class="overflow-x-auto">
  <table
    {% if is_oob %}hx-swap-oob="true"{% endif %}
    class="min-w-full divide-y divide-stone-300 rounded-lg shadow-md"
    id="budget-table"
  >
    <thead class="bg-stone-100">
      <tr>
        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-stone-600 uppercase tracking-wider">Amount</th>
        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-stone-600 uppercase tracking-wider">Category</th>
        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-stone-600 uppercase tracking-wider">Month</th>
        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-stone-600 uppercase tracking-wider">Year</th>
        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-stone-600 uppercase tracking-wider">Created At</th>
        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-stone-600 uppercase tracking-wider">Actions</th>
      </tr>
    </thead>
    <tbody class="bg-white divide-y divide-stone-300">
      {% for budget in budgets %}
        <tr class="{% cycle 'bg-white' 'bg-stone-50' %}">
          <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">{{ budget.amount }}</td>
          <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">{{ budget.category.name }}</td>
          <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">{{ budget.month_name }}</td>
          <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">{{ budget.year }}</td>
          <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">{{ budget.created_at|date:"Y-m-d H:i" }}</td>
          <td class="px-6 py-4 whitespace-nowrap text-sm">
            <div class="flex space-x-2">
              <button
                hx-get="#"
                hx-target="#modal-placeholder"
                hx-swap="outerHTML"
                class="px-2 py-1 text-xs font-medium text-green-800 bg-green-100 rounded-md hover:bg-green-300 focus:outline-none focus:ring-2 focus:ring-green-400"
              >
                Edit
              </button>
              <form
                hx-post="#"
                hx-swap="none"
                class="flex-1 min-w-[100px]"
              >
                {% csrf_token %}
                <button
                  type="submit"
                  class="px-2 py-1 text-xs font-medium text-red-800 bg-red-100 rounded-md hover:bg-red-300 focus:outline-none focus:ring-2 focus:ring-red-400"
                >
                  Delete
                </button>
              </form>
            </div>
          </td>
        </tr>
      {% empty %}
        <tr>
          <td colspan="6" class="px-6 py-4 text-center text-sm text-stone-500">No budgets found.</td>
        </tr>
      {% endfor %}
    </tbody>
  </table>
  <div id="pagination" class="mt-4">
    {% include "partials/pagination.html" %}
  </div>
  </div>
</div>
{% endblock content %}